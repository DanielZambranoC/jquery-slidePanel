/*! jQuery slidePanel - v0.1.0 - 2015-04-05
* https://github.com/amazingSurge/jquery-slidePanel
* Copyright (c) 2015 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";function e(){return"undefined"!=typeof c.performance&&c.performance.now?c.performance.now():Date.now()}function f(a){return"string"==typeof a&&-1!=a.indexOf("%")}function g(a){return a&&"matrix"==a.substr(0,6)?a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function h(a){"string"!=typeof a&&(a=JSON.stringify(a));var b,c,d,e=0;if(0==a.length)return e;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e}function i(a,b,c,d){function e(a,b){return 1-3*b+3*a}function f(a,b){return 3*b-6*a}function g(a){return 3*a}function h(a,b,c){return((e(b,c)*a+f(b,c))*a+g(b))*a}function i(a,b,c){return 3*e(b,c)*a*a+2*f(b,c)*a+g(b)}function j(b){for(var d=b,e=0;4>e;++e){var f=i(d,a,c);if(0===f)return d;var g=h(d,a,c)-b;d-=g/f}return d}return a===b&&c===d?{css:"linear",fn:function(a){return a}}:{css:"cubic-bezier("+a+","+b+","+c+","+d+")",fn:function(a){return h(j(a),b,d)}}}function j(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function k(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function l(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}var m=a.slidePanel=function(){m.show.apply(this,arguments)};Date.now||(Date.now=function(){return(new Date).getTime()});for(var n=["webkit","moz"],o=0;o<n.length&&!c.requestAnimationFrame;++o){var p=n[o];c.requestAnimationFrame=c[p+"RequestAnimationFrame"],c.cancelAnimationFrame=c[p+"CancelAnimationFrame"]||c[p+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS (6|7|8)/.test(c.navigator.userAgent)||!c.requestAnimationFrame||!c.cancelAnimationFrame){var q=0;c.requestAnimationFrame=function(a){var b=e(),c=Math.max(q+16,b);return setTimeout(function(){a(q=c)},c-b)},c.cancelAnimationFrame=clearTimeout}var r=function(){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return g[b]!==d&&(e=b),e||a.each(h,function(a,b){return g[b+f]!==d?(e="-"+b.toLowerCase()+"-"+f,!1):void 0}),c?e:e?!0:!1}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h=["webkit","Moz","O","ms"],i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}},k={};return j.csstransitions()&&(k.transition=new String(f("transition")),k.transition.end=i.transition.end[k.transition]),j.cssanimations()&&(k.animation=new String(f("animation")),k.animation.end=i.animation.end[k.animation]),j.csstransforms()&&(k.transform=new String(f("transform")),k.transform3d=j.csstransforms3d()),k.touch="ontouchstart"in c||c.DocumentTouch&&b instanceof c.DocumentTouch?!0:!1,k}(),s={ease:i(.25,.1,.25,1),linear:i(0,0,1,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1)};m.options={classes:{base:"slidePanel",loading:"slidePanel-loading",content:"slidePanel-content"},template:function(){return'<div class="'+this.classes.base+'"><div class="'+this.classes.content+'"></div></div>'},loadingAppendTo:"panel",loadingTemplate:function(){return'<div class="'+this.classes.loading+'"></div>'},useCssTransforms3d:!0,useCssTransforms:!0,useCssTransitions:!0,direction:"right",duration:"300",easing:"ease"},a.extend(j.prototype,{initialize:function(a){this.options=a,this.build()},build:function(){if(!this._build){var b=this.options,c=b.template.call(b);this.$panel=a(c).addClass(b.classes.base+"-"+b.direction).appendTo("body"),this.$content=this.$panel.find("."+this.options.classes.content),this.loading=new k(this),this.setPosition(this.getHidePosition()),this._build=!0}},getHidePosition:function(){var b=this.options;if(b.useCssTransforms||b.useCssTransforms3d)switch(b.direction){case"top":case"left":return"-100";case"bottom":case"right":return"100"}else switch(b.direction){case"top":case"bottom":return 100*-(this.$panel.outerHeight()/a(c).height());case"left":case"right":return 100*-(this.$panel.outerWidth()/a(c).width())}},show:function(b){this.build(),u.enter("show"),a("html").addClass(this.options.classes.base+"-html"),this.$panel.addClass(this.options.classes.base+"-show"),t["do"](this,0),a.isFunction(b)&&b.call(this)},hide:function(b){u.leave("show");var c=this;t["do"](this,this.getHidePosition(),function(){c.$panel.removeClass(c.options.classes.base+"-show"),u.is("show")||a("html").removeClass(c.options.classes.base+"-html")}),a.isFunction(b)&&b.call(this)},makePositionStyle:function(a){var b,c="0",d="0";f(a)||(a+="%"),this.options.useCssTransforms&&r.transform?("left"===this.options.direction||"right"===this.options.direction?c=a:d=a,b=r.transform.toString(),a=this.options.useCssTransforms3d&&r.transform3d?"translate3d("+c+","+d+",0)":"translate("+c+","+d+")"):b=this.options.direction;var e={};return e[b]=a,e},getPosition:function(){var a;if(this.options.useCssTransforms&&r.transform){if(a=g(this.options.useCssTransforms3d&&r.transform3d?this.$panel.css(r.transform):this.$panel.css(r.transform)),!a)return 0;"left"===this.options.direction||"right"===this.options.direction?(a=a[12]||a[4],a=a/this.$panel.width()*100):(a=a[13]||a[5],a=a/this.$panel.height()*100)}else a=this.$panel.css(this.options.direction),a=parseFloat(a.replace("px",""));return a},setPosition:function(a){var b=this.makePositionStyle(a);this.$panel.css(b)}}),a.extend(k.prototype,{initialize:function(a){this._view=a,this.build()},build:function(){if(!this._build){var b=this._view.options,c=b.loadingTemplate.call(b);switch(this.$dom=a(c),b.loadingAppendTo){case"panel":this.$dom.appendTo(this._view.$panel);break;case"body":this.$dom.appendTo("body");break;default:this.$dom.appendTo(b.loadingAppendTo)}this._build=!0}},show:function(){this.build(),this.$dom.addClass(this.options.classes.loading+"-show")},hide:function(){this.$dom.removeClass(this.options.classes.loading+"-show")}});var t={prepareTransition:function(b,c,d,e,f){var g=[];c&&g.push(c),d&&(a.isNumeric(d)&&(d+="ms"),g.push(d)),g.push(e?e:this.easing.css),f&&g.push(f),b.$panel.css(r.transition,g.join(" "))},"do":function(b,d,f){var g=b.options.duration,h=b.options.easing||"ease",i=this,j=b.makePositionStyle(d);for(var k in j)break;if(b.options.useCssTransitions&&r.transition)this.prepareTransition(b,k,g,h),b.$panel.one(r.transition.end,function(){a.isFunction(f)&&f(),b.$panel.css(r.transition,"")}),setTimeout(function(){b.setPosition(d)},200);else{var l=e(),m=b.getPosition(),n=d,o=function(d){var e=(d-l)/b.options.duration;e>1&&(e=1),e=s[h].fn(e);var g=parseFloat(m+e*(n-m),10);b.setPosition(g),1===e?(c.cancelAnimationFrame(i._frameId),i._frameId=null,a.isFunction(f)&&f()):i._frameId=c.requestAnimationFrame(o)};i._frameId=c.requestAnimationFrame(o)}}};a.extend(l.prototype,{initialize:function(b){var c=arguments[1]||{};if("string"==typeof b)b={url:b};else if(b&&1==b.nodeType){var d=a(b);b={url:d.attr("href"),options:d.data()||{}}}return b.options=b&&b.options?a.extend(!0,c,b.options):c,b.options=a.extend(!0,{},m.options,b.options),a.extend(this,b),this}});var u={_states:{},_views:{},_current:null,is:function(a){return this._states[a]&&this._states[a]>0},enter:function(a){this._states[a]===d&&(this._states[a]=0),this._states[a]++},leave:function(a){this._states[a]--},show:function(a){if(!(a instanceof l))switch(arguments.length){case 0:a=new l;break;case 1:a=new l(arguments[0]);break;case 2:a=new l(arguments[0],arguments[1])}var b=this.getView(a.options),c=this,d=function(){b.show(),c._current=b};b!==this._current&&(null!==this._current?this._current.hide(d):d())},getView:function(a){var b=h(a);return this._views.hasOwnProperty(b)?this._views[b]:this._views[b]=new j(a)},hide:function(){if(null!==this._current){var a=this;this._current.hide(function(){a._current=null})}}};a.extend(m,{is:function(a){return u.is(a)},show:function(){return u.show.apply(u,arguments),this},hide:function(){return u.hide.apply(u,arguments),this}}),a.fn.slidePanel=function(b){if("string"==typeof b){{var c=b;Array.prototype.slice.call(arguments,1)}return/^\_/.test(c)?!1:this.each(function(){a.data(this,"slidePanel")})}return this.each(function(){a.data(this,"slidePanel")||(a.data(this,"slidePanel",new l(this,b)),a(this).on("click",function(b){var c=a.data(this,"slidePanel");u.show(c),b.preventDefault(),b.stopPropagation()}))})}}(jQuery,document,window);